---
name: Check HashiCluster Role
on:
  workflow_dispatch: {}
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

jobs:
  molecule-test:
    runs-on: ubuntu-latest
    steps:

      - name: checkout
        uses: actions/checkout@v2
        with:
          path: "${{ github.repository }}"

      - name: make local actions available
        run: "ln -fs ${GITHUB_REPOSITORY}/.github/actions ./actions"

      - name: molecule
        uses: "./actions/molecule"
        with:
          molecule-command: 'test'
